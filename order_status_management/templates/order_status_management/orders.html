{% extends "base.html" %}
{% load static %}

{% block title %}SuperPizza Orders{% endblock title %}

{% block content %}
<main>
  <div class="container-fluid p-0">
    
    <div class="container my-2 text-center">
      <h1 class="mt-4 mb-5">Orders</h1>
      
      <div class="d-flex justify-content-center my-4">
        <div class="btn-group main-color d-flex flex-wrap" role="group" aria-label="Order status options" id="order_status">
          <a class="btn btn-outline-primary filter-btn {% if status == 'new' %}active{% endif %}" href="{% url 'orders' 'new' %}">New</a>
          <a class="btn btn-outline-primary filter-btn {% if status == 'accepted' %}active{% endif %}" href="{% url 'orders' 'accepted' %}">Verified</a>
          <a class="btn btn-outline-primary filter-btn {% if status == 'being_cooked' %}active{% endif %}" href="{% url 'orders' 'being_cooked' %}">Cooking</a>
          <a class="btn btn-outline-primary filter-btn {% if status == 'being_prepared' %}active{% endif %}" href="{% url 'orders' 'being_prepared' %}">Preparing</a>
          <a class="btn btn-outline-primary filter-btn {% if status == 'being_delivered' %}active{% endif %}" href="{% url 'orders' 'being_delivered' %}">Delivering</a>
          <a class="btn btn-outline-primary filter-btn {% if status == 'completed' %}active{% endif %}" href="{% url 'orders' 'completed' %}">Done</a>
			</div>
		</div>

    {% for order in orders %}
    <div class="card mb-4">
      <div class="card-header">
        Order Number: {{ order.order_number }}
      </div>
      <div class="card-body">
        <h5 class="card-title">Customer Information</h5>
        <p class="card-text">Name: {{ order.full_name }}</p>
        <p class="card-text">Email: {{ order.email }}</p>
        <p class="card-text">Phone Number: {{ order.phone_number }}</p>
        <p class="card-text">Address: {{ order.street_address1 }}, {{ order.town_or_city }}, {{ order.county }}, {{ order.country }}</p>
        <p class="card-text">Delivery Cost: €{{ order.delivery_cost }}</p>
        <p class="card-text">Line Item Total: €{{ order.order_total }}</p>
        <p class="card-text">Grand Total: €{{ order.grand_total }}</p>
        <!-- Add more order details as needed -->

        <h5 class="card-title mt-4">Line Items</h5>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Product</th>
              <th scope="col">Size</th>
              <th scope="col">Quantity</th>
              <th scope="col">Total</th>
              <!-- Add more headers as needed -->
            </tr>
          </thead>
          <tbody>
            {% for line_item in order.lineitems.all %}
            <tr>
              <td>{{ line_item.product }}</td>
              <td>{{ line_item.product_size }}</td>
              <td>{{ line_item.quantity }}</td>
              <td>€{{ line_item.lineitem_total }}</td>
              <!-- Add more cells as needed -->
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endfor %}
	
    </div>
	</div>
</main>
{% endblock content %}

{% block scripts %}
<script src="{% static 'products/js/pizza_list.js' %}"></script>
{% endblock %}